<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Input files &#8212; i-PI 3.0.0-alpha2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/agogo.css?v=3ace793a" />
    <link rel="stylesheet" type="text/css" href="_static/custom_styles.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=a69af3ce"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Input file tags" href="input-tags.html" />
    <link rel="prev" title="Internal units and conventions" href="units.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
          <p class="logo"><a href="index.html">
            <img class="logo" src="_static/ipi-logo.svg" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="index.html">i-PI 3.0.0-alpha2 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="units.html" title="Internal units and conventions"
             accesskey="P">previous</a> |
          <a href="input-tags.html" title="Input file tags"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Core features</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Internal units and conventions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Input files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input-file-format-and-structure">Input file format and structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initialization-section">Initialization section</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="input-tags.html">Input file tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="output-files.html">Output files</a></li>
<li class="toctree-l1"><a class="reference internal" href="output-tags.html">Output file tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed.html">Distributed execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">A simple tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="input-files">
<span id="inputfiles"></span><h1>Input files<a class="headerlink" href="#input-files" title="Permalink to this heading">¶</a></h1>
<section id="input-file-format-and-structure">
<span id="ifilestructure"></span><h2>Input file format and structure<a class="headerlink" href="#input-file-format-and-structure" title="Permalink to this heading">¶</a></h2>
<p>In order to give the clearest layout, xml formatting was chosen as the
basis for the main input file. An xml file consists of a set of
hierarchically nested tags. There are three parts to an xml tag. Each
tag is identified by a tag name, which specifies the class or variable
that is being initialized. Between the opening and closing tags there
may be some data, which may or may not contain other tags. This is used
to specify the contents of a class object, or the value of a variable.
Finally tags can have attributes, which are used for metadata, i.e. data
used to specify how the tag should be interpreted. As an example, a
‘mode’ attribute can be used to select between different thermostatting
algorithms, specifying how the options of the thermostat class should be
interpreted.</p>
<p>A xml tag has the following syntax:</p>
<p>The syntax for the different types of tag data is given below:</p>
<div class="center docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Data type</p></th>
<th class="head"><p>Syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Boolean</p></td>
<td><p>&lt;tag&gt;True&lt;/tag&gt; or &lt;tag&gt;False&lt;/tag&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>Float</p></td>
<td><p>&lt;tag&gt;11.111&lt;/tag&gt; or &lt;tag&gt;1.1111e+1&lt;/tag&gt;</p></td>
</tr>
<tr class="row-even"><td><p>Integer</p></td>
<td><p>&lt;tag&gt;12345&lt;/tag&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>String</p></td>
<td><p>&lt;tag&gt;string_data&lt;/tag&gt;</p></td>
</tr>
<tr class="row-even"><td><p>Tuple</p></td>
<td><p>&lt;tag&gt; (int1, int2, …)&lt;/tag&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>Array</p></td>
<td><p>&lt;tag&gt; [ entry1, entry2, …] &lt;/tag&gt;</p></td>
</tr>
<tr class="row-even"><td><p>Dictionary</p></td>
<td><p>&lt;tag&gt;{name1: data1, name2: data2, …}&lt;/tag&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note that arrays are always given as one-dimensional lists. In cases
where a multi-dimensional array must be entered, one can use the ‘shape’
attribute, that determines how the list will be reshaped into a
multi-dimensional array. For example, the bead positions are represented
in the code as an array of shape (number of beads, 3*number of atoms).
If we take a system with 20 atoms and 8 beads, then this can be
represented in the xml input file as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;beads nbeads=’8’ natoms=’20’&gt; &lt;q shape=‘(8,60)’&gt;[ q11x, q11y, q11z,
q12x, q12y, ... ]&lt;/q&gt; ... &lt;/beads&gt;
</pre></div>
</div>
<p>If ‘shape’ is not specified, a 1D array will be assumed.</p>
<p>The code uses the hierarchical nature of the xml format to help read the
data; if a particular object is held within a parent object in the code,
then the tag for that object will be within the appropriate parent tags.
This is used to make the structure of the simulation clear.</p>
<p>For example, the system that is being studied is partly defined by the
thermodynamic ensemble that should be sampled, which in turn may be
partly defined by the pressure, and so on. To make this dependence clear
in the code the global simulation object which holds all the data
contains an ensemble object, which contains a pressure variable.</p>
<p>Therefore the input file is specified by having a <a class="reference internal" href="input-tags.html#simulation"><span class="std std-ref">simulation</span></a> tag, containing an
<a class="reference internal" href="input-tags.html#ensemble"><span class="std std-ref">ensemble</span></a> tag, which itself contains a <span class="xref std std-ref">pressure</span> tag, which will contain a float
value corresponding to the external pressure. In this manner, the class
structure can be constructed iteratively.</p>
<p>For example, suppose we want to generate a <em>NPT</em> ensemble at an external
pressure of <span class="math notranslate nohighlight">\(10^{-7}\)</span> atomic pressure units. This would be
specified by the following input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">system</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">ensemble</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">pressure</span><span class="o">&gt;</span> <span class="mf">1e-7</span> <span class="o">&lt;/</span><span class="n">pressure</span><span class="o">&gt;</span> <span class="o">...</span> <span class="o">&lt;/</span><span class="n">ensemble</span><span class="o">&gt;</span> <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">system</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>To help detect any user error the recognized tag names, data types and
acceptable options are all specified in the code in a specialized input
class for each class of object. A full list of all the available tags
and a brief description of their function is given at
<a class="reference external" href="input-tags.rst">input tags</a>.</p>
<section id="overriding-default-units">
<span id="inputunits"></span><h3>Overriding default units<a class="headerlink" href="#overriding-default-units" title="Permalink to this heading">¶</a></h3>
<p>Many of the input parameters, such as the pressure in the above example,
can be specified in more than one unit. Indeed, often the atomic unit is
inconvenient to use, and we would prefer something else. Let us take the
above example, but instead take an external pressure of 3 MPa. Instead
of converting this to the atomic unit of pressure, it is possible to use
pascals directly using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;system&gt; &lt;ensemble&gt; &lt;pressure units=‘pascal’&gt; 3e6 &lt;/pressure&gt; ...
&lt;/ensemble&gt; ... &lt;/system&gt;
</pre></div>
</div>
<p>The code can also understand S.I. prefixes, so this can be simplified
further using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;system&gt; &lt;ensemble&gt; &lt;pressure units=‘megapascal’&gt; 3 &lt;/pressure&gt; ...
&lt;/ensemble&gt; ... &lt;/system&gt;
</pre></div>
</div>
<p>A full list of which units are defined for which dimensions can be found
in the units.py module.</p>
</section>
</section>
<section id="initialization-section">
<h2>Initialization section<a class="headerlink" href="#initialization-section" title="Permalink to this heading">¶</a></h2>
<p>The input file can contain a <span class="xref std std-ref">initializer</span> tag, which contains a number of fields that
determine the starting values of the various quantities that define the
state of the simulation – atomic positions, cell parameters, velocities,
…. These fields (<a class="reference internal" href="input-tags.html#positions"><span class="std std-ref">positions</span></a>, <a class="reference internal" href="input-tags.html#velocities"><span class="std std-ref">velocities</span></a>, <a class="reference internal" href="input-tags.html#cell"><span class="std std-ref">cell</span></a>,
<a class="reference internal" href="input-tags.html#masses"><span class="std std-ref">masses</span></a>, <a class="reference internal" href="input-tags.html#labels"><span class="std std-ref">labels</span></a>, <a class="reference internal" href="input-tags.html#file"><span class="std std-ref">file</span></a> ) specify how the values should be obtained:
either from a manually-input list or from an external file.</p>
<section id="configuration-files">
<span id="configfile"></span><h3>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this heading">¶</a></h3>
<p>Instead of initializing the atom positions manually, the starting
configuration can be specified through a separate data file. The name of
the configuration file is specified within one of the possible fields of
an <span class="xref std std-ref">initializer</span> tag. The file format is specified with the “mode” attribute. The
currently accepted file formats are:</p>
<ul class="simple">
<li><p>pdb</p></li>
<li><p>xyz</p></li>
<li><p>chk</p></li>
</ul>
<p>the last of which will be described in the next section.</p>
<p>Depending on the field name, the values read from the external file will
be used to initialize one component of the simulation or another (e.g.
the positions or the velocities). The <span class="xref std std-ref">initfile</span> tag can be used as a shortcut to
initialize the atom positions, labels, masses and possibly the cell
parameters at the same time. For instance,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">initialize</span> <span class="n">nbeads</span><span class="o">=</span><span class="s2">&quot;8&quot;</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">file</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;pdb&quot;</span><span class="o">&gt;</span> <span class="n">init</span><span class="o">.</span><span class="n">pdb</span> <span class="o">&lt;/</span><span class="n">file</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">initialize</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>is equivalent to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">initialize</span> <span class="n">nbeads</span><span class="o">=</span><span class="s2">&quot;8&quot;</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">positions</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;pdb&quot;</span><span class="o">&gt;</span> <span class="n">init</span><span class="o">.</span><span class="n">pdb</span> <span class="o">&lt;/</span><span class="n">positions</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">labels</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;pdb&quot;</span><span class="o">&gt;</span> <span class="n">init</span><span class="o">.</span><span class="n">pdb</span> <span class="o">&lt;/</span><span class="n">labels</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">masses</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;pdb&quot;</span><span class="o">&gt;</span> <span class="n">init</span><span class="o">.</span><span class="n">pdb</span>
<span class="o">&lt;/</span><span class="n">masses</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">cell</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;pdb&quot;</span><span class="o">&gt;</span> <span class="n">init</span><span class="o">.</span><span class="n">pdb</span> <span class="o">&lt;/</span><span class="n">cell</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">initialize</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In practice, the using the <span class="xref std std-ref">initfile</span> tag will only read the information that can
be inferred from the given file type, so for an ‘xyz’ file that does not contain a cell, the cell
parameters will not be initialized.</p>
</section>
<section id="initialization-from-checkpoint-files">
<h3>Initialization from checkpoint files<a class="headerlink" href="#initialization-from-checkpoint-files" title="Permalink to this heading">¶</a></h3>
<p>i-PI gives the option to output the entire state of the simulation at a
particular timestep as an xml input file, called a checkpoint file (see
<a class="reference internal" href="output-files.html#checkpoints"><span class="std std-ref">Checkpoint files</span></a> for details). As well as being a valid input for
i-PI, a checkpoint can also be used inside an <span class="xref std std-ref">initializer</span> tag to specify the
configuration of the system, discarding other parameters of the
simulation such as the current time step or the chosen ensemble. Input
from a checkpoint is selected by using “chk” as the value of the “mode”
attribute. As for the configuration file, a checkpoint file can be used
to initialize either one or many variables depending on which tag name
is used.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="units.html" title="Internal units and conventions"
              >previous</a> |
            <a href="input-tags.html" title="Input file tags"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/input-files.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
    &#169; Copyright 2021, The i-PI developers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>